# This is a basic workflow to help you get started with Actions

name:                   Pull Guides

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches:           [ "main" ]
  pull_request:
    branches:           [ "main" ]
  schedule:
    - cron:             '0 12 * * *'
  workflow_dispatch:

permissions:
  contents:             write
  pages:                write
  id-token:             write

# Allow one concurrent deployment
concurrency:
  group:                "pages"
  cancel-in-progress:   true

jobs:
  generate:
    runs-on:            ubuntu-latest
    steps:
    - name:             Checkout
      uses:             actions/checkout@v3
      with:
        repository:     ${{ github.repository }}

    - name:             Generate Models Webpage
      run:              apt update && bash ${{ github.workspace }}/install.sh && bash ${{ github.workspace }}/update-sdmodels.sh
      shell:            sh

    - name:             Commit Changes
      uses:             devops-infra/action-commit-push@master
      with:
        github_token:   "${{ secrets.GITHUB_TOKEN }}"
        add_timestamp:  false
        commit_prefix:  "[AUTO] "
        commit_message: "Update guides"
        force:          false
